#!/bin/bash

# Cleanup function
cleanup() {
    pkill -f "ssh.*23750:/var/run/docker.sock"
}

# Set trap to run cleanup on ANY exit (normal, Ctrl+C, or terminal close)
trap cleanup EXIT INT TERM

# Start SSH tunnel in background
ssh -fNT -L localhost:23750:/var/run/docker.sock inspiron@ubuntu-inspiron

# Run lazydocker
DOCKER_HOST=tcp://localhost:23750 lazydocker
